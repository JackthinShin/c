<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>在线 C 编译器 · 使用指南与介绍</title>
  <meta name="description" content="零配置、开箱即用的在线 C 编译器：浏览器内编辑、自动缩进、运行输出、另存为下载、明暗主题切换。" />
  <meta property="og:title" content="在线 C 编译器" />
  <meta property="og:description" content="零配置、开箱即用的在线 C 编译器：浏览器内编辑、自动缩进、运行输出、另存为下载、明暗主题切换。" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#2563eb" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect x='6' y='6' width='52' height='52' rx='12' fill='%232563eb'/%3E%3Cpath d='M30 18 L18 32 L30 46 M34 18 L46 32 L34 46' fill='none' stroke='%23fff' stroke-width='6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" type="image/svg+xml" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --bg:#0b0c0d; --panel:#0f1113; --text:#dbe9ff; --muted:#9aa4ad; --accent:#2563eb; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.5);
    }
    .light{ --bg:#f7fafc; --panel:#ffffff; --text:#0b1220; --muted:#475569; --accent:#2563eb; --shadow:0 8px 28px rgba(0,0,0,.08); }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--muted);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial}
    a{color:var(--accent);text-decoration:none}
    .page{max-width:1040px;margin:0 auto;padding:24px}
    .hero{background:linear-gradient(180deg,rgba(255,255,255,.03),transparent);border-radius:var(--radius);box-shadow:var(--shadow);padding:32px;margin-top:18px}
    .hero h1{margin:0 0 10px;color:var(--text);font-size:28px}
    .hero p{margin:0;color:var(--muted);line-height:1.65}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .btn{border:1px solid rgba(255,255,255,.06);background:transparent;color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
    .btn.primary{background:var(--accent);color:#fff;border:0}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-top:22px}
    .card{background:var(--panel);border-radius:12px;padding:16px;box-shadow:var(--shadow)}
    .card h3{margin:0 0 8px;color:var(--text);font-size:16px}
    .card p{margin:0;color:var(--muted);line-height:1.7}
    .section{margin-top:28px;background:var(--panel);border-radius:12px;box-shadow:var(--shadow);padding:20px}
    .section h2{margin:0 0 12px;color:var(--text);font-size:20px}
    .list{margin:0;padding-left:18px;color:var(--muted);line-height:1.8}
    .footer{display:flex;align-items:center;justify-content:space-between;margin:32px 0 14px;color:var(--muted)}
    .footer .brand{color:var(--muted)}
    .theme-toggle{position:fixed;right:16px;bottom:16px;border-radius:10px;background:var(--panel);border:1px solid rgba(0,0,0,.1);padding:10px 12px;color:var(--text);box-shadow:var(--shadow);cursor:pointer}
    @media (max-width:960px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="page">
    <div class="hero">
      <h1><i class="fas fa-code"></i> 在线 C 编译器</h1>
      <p>零配置、开箱即用的在线 C 语言编译/运行环境：浏览器中即可编写与运行 C 代码，支持智能自动缩进、美观主题、复制与另存为下载；运行优先调用 Wandbox，失败时自动回退本地模拟，保障体验稳定。</p>
      <div class="cta">
        <a class="btn primary" href="./index.html"><i class="fas fa-play"></i> 立即体验</a>
        <a class="btn" href="./CHANGELOG.md" target="_blank"><i class="fas fa-book"></i> 查看更新日志</a>
        <a class="btn" href="#help"><i class="fas fa-circle-question"></i> 使用帮助</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h3><i class="fas fa-bolt"></i> 核心特性</h3>
        <p>Monaco 编辑器、自动缩进（纯 JS）、撤销/重做、复制、另存为下载、明亮/暗色主题、侧栏输入输出与运行状态显示。</p>
      </div>
      <div class="card">
        <h3><i class="fas fa-wand-magic-sparkles"></i> 智能缩进</h3>
        <p>支持 if/for/while 单行体、do...while、switch/case、字符串/注释/预处理指令，避免常见误缩进。</p>
      </div>
      <div class="card">
        <h3><i class="fas fa-shield-halved"></i> 数据与隐私</h3>
        <p>编辑内容保存在浏览器本地（localStorage）。另存为将下载到你的设备；提交到 Wandbox 的代码仅用于编译运行。</p>
      </div>
    </div>

    <div id="advantages" class="section">
      <h2><i class="fas fa-star"></i> 最大优势</h2>
      <ol class="list">
        <li>方便快捷，无需下载，随时可用</li>
        <li>可以一键复制，方便 OJ 做题提交</li>
        <li>关闭标签页后代码不会丢失</li>
        <li>可以一键自动缩进，解决缩进烦恼</li>
        <li>界面美观，堪称完美，绝对细节</li>
        <li>安全考量，无需担心代码泄漏</li>
      </ol>
    </div>

    <div id="more-advantages" class="section">
      <h2><i class="fas fa-gem"></i> 更多优势</h2>
      <ul class="list">
        <li><b>纯前端 · 零安装</b>：无需登录与插件，打开即用；PWA 支持可安装到桌面，图标为自适应 maskable。</li>
        <li><b>离线友好</b>：首次加载后，页面、图标与基础脚本会被缓存；断网仍可编辑、保存与分享链接（运行会提示回退）。</li>
        <li><b>极速交互</b>：Monaco 编辑器配合本地持久化，撤销/重做、复制、自动缩进响应迅速。</li>
        <li><b>易用细节</b>：文件名与脏标记、主题记忆、移动端 I/O 面板切换、动画和阴影统一，使用过程顺滑。</li>
        <li><b>可靠最小集</b>：默认不上传任何代码，只有点击“运行”时才调用远端；失败会回退到本地模拟，保障体验。</li>
        <li><b>可分享与可复现</b>：支持将代码压缩进链接（URL hash），一键复制给同学/同事，对方打开即还原。</li>
      </ul>
    </div>

    <div id="help" class="section">
      <h2><i class="fas fa-circle-question"></i> 使用帮助</h2>
      <ol class="list">
        <li>打开 <a href="./index.html">在线编译器</a>，在编辑区域编写 C 代码。</li>
        <li>左侧“输入 (stdin)”填入你的标准输入（可选）。</li>
        <li>点击底部“运行”按钮，优先通过 Wandbox 编译/运行，若不可用自动回退到本地模拟。</li>
        <li>需要排版可点击“自动缩进”；复制代码用“复制”，保存到本地用“另存为”。</li>
        <li>切换“主题”可在明亮/暗色间切换；撤销/重做按钮会在可用时自动启用。</li>
      </ol>
      <p style="margin-top:8px">注意：若 Wandbox 暂不可用，输出区会提示已回退到“本地模拟”。</p>
    </div>

    <div class="section">
      <h2><i class="fas fa-list-check"></i> 常见问题（FAQ）</h2>
      <ul class="list">
        <li><b>Q: 是否支持 C++？</b> A: 目前内置 C 语法高亮，打开 .cpp/.hpp 文件会自动切换至 C++ 模式；运行仍通过 C 的 Wandbox 编译器配置，可后续扩展。</li>
        <li><b>Q: 我的代码会丢失吗？</b> A: 页面会将你的内容保存在浏览器的 localStorage；建议定期“另存为”进行备份。</li>
        <li><b>Q: WASM 运行器可用吗？</b> A: 当前为预留能力，默认不启用；运行优先 Wandbox，不可用时回退模拟。</li>
        <li><b>Q: 如何查看历史更新？</b> A: 点击页面右下角“By C. He from ZJU | 版本号”，或在此处打开 <a href="./CHANGELOG.md" target="_blank">CHANGELOG.md</a>。</li>
      </ul>
    </div>

    <div class="section">
      <h2><i class="fas fa-bullhorn"></i> 适用场景</h2>
      <ul class="list">
        <li>课堂/培训演示：免安装、跨平台。</li>
        <li>题解/算法草稿：快速验证小段代码逻辑。</li>
        <li>示例/文档附带代码：一键运行和复制。</li>
      </ul>
    </div>

    <div class="footer">
      <div class="brand">By C. He from ZJU · Online C Compiler</div>
      <div>
        <a href="./index.html" class="btn"><i class="fas fa-arrow-left"></i> 返回编译器</a>
      </div>
    </div>
  </div>

  <button id="themeToggle" class="theme-toggle"><i class="fas fa-moon"></i> 主题</button>
  <script>
    const btn = document.getElementById('themeToggle');
    const apply = () => {
      const light = localStorage.getItem('about_theme') === 'light';
      document.documentElement.classList.toggle('light', light);
      btn.innerHTML = light ? '<i class="fas fa-moon"></i> 主题' : '<i class="fas fa-sun"></i> 主题';
    };
    apply();
    btn.addEventListener('click', () => {
      const light = !(localStorage.getItem('about_theme') === 'light');
      localStorage.setItem('about_theme', light ? 'light' : 'dark');
      apply();
    });
    // 动态生成 favicon 与 PWA 图标，使用与首页一致的“代码”图形（含缓存与 maskable）
    (function(){
      function drawIcon(size){
        const c = document.createElement('canvas');
        c.width = c.height = size;
        const ctx = c.getContext('2d');
        const r = Math.round(size*0.22);
        const pad = Math.round(size*0.08);
        const w = size, h = size;
        const bg = '#2563eb';
        ctx.fillStyle = bg;
        roundRect(ctx, pad, pad, w-2*pad, h-2*pad, r); ctx.fill();
        ctx.strokeStyle = '#fff'; ctx.lineCap='round'; ctx.lineJoin='round'; ctx.lineWidth = Math.max(2, size*0.09);
        const cx=w/2, cy=h/2, dx=size*0.18, dy=size*0.18;
        ctx.beginPath(); ctx.moveTo(cx-0.06*size, cy-dy); ctx.lineTo(cx-dx, cy); ctx.lineTo(cx-0.06*size, cy+dy); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(cx+0.06*size, cy-dy); ctx.lineTo(cx+dx, cy); ctx.lineTo(cx+0.06*size, cy+dy); ctx.stroke();
        return c;
        function roundRect(ctx,x,y,w,h,r){
          const rr=Math.min(r,w/2,h/2); ctx.beginPath(); ctx.moveTo(x+rr,y); ctx.arcTo(x+w,y,x+w,y+h,rr); ctx.arcTo(x+w,y+h,x,y+h,rr); ctx.arcTo(x,y+h,x,y,rr); ctx.arcTo(x,y,x+w,y,rr); ctx.closePath();
        }
      }
      function setFavicon(url){
        let link = document.querySelector('link[rel="icon"]');
        if(!link){ link=document.createElement('link'); link.rel='icon'; document.head.appendChild(link); }
        link.type='image/png'; link.href=url;
      }
      function updateManifest(icons){
        let m = document.querySelector('link[rel="manifest"]');
        if(!m){ m=document.createElement('link'); m.rel='manifest'; document.head.appendChild(m); }
        const manifest = { name:'在线 C 编译器', short_name:'C编译器', start_url:'./index.html', display:'standalone', background_color:'#0b0c0d', theme_color:'#0b0c0d', lang:'zh-CN', icons:icons };
        const blob = new Blob([JSON.stringify(manifest)], {type:'application/manifest+json'});
        m.href = URL.createObjectURL(blob);
      }
      // 缓存
      const cacheKey = 'dyn_icons_about_v1';
      const cached = localStorage.getItem(cacheKey);
      if (cached) {
        try{
          const data = JSON.parse(cached);
          if (data && data.favicon && data.icons) { setFavicon(data.favicon); updateManifest(data.icons); return; }
        }catch(e){}
      }
      try{
        const sizes = [128,192,256,512];
        const canvases = sizes.map(s=>drawIcon(s));
        Promise.all(canvases.map((c,i)=>new Promise(res=>c.toBlob(b=>res({size:sizes[i],blob:b}), 'image/png')))).then(list=>{
          const urls = list.map(it=>({size:it.size,url:URL.createObjectURL(it.blob)}));
          const fav = urls.find(u=>u.size===192)||urls[0];
          setFavicon(fav.url);
          const icons = urls.map(u=>({src:u.url,sizes:u.size+'x'+u.size,type:'image/png',purpose:(u.size>=256?'any maskable':'any')}));
          updateManifest(icons);
          try{localStorage.setItem(cacheKey, JSON.stringify({favicon:fav.url, icons}));}catch(e){}
        });
      }catch(e){}
    })();
  </script>
</body>
</html>
